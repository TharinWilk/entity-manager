import{u as O,_ as j}from"./COde6Xch.js";import E from"./Byh4A0lU.js";import{c as J,a as z,_ as R}from"./Bee4UNLJ.js";import{d as U,r as l,j as L,v as f,x as y,y as o,R as P,I as s,C as B,z as $,A as i,J as q,o as G,M as H,B as w,S as K,U as Q,F as W,G as X,V as Y}from"./BswifvXQ.js";import{_ as Z}from"./DlAUqK2U.js";import"./BqD6zFhu.js";const ee={class:"relative w-full"},te={key:0,class:"error-message"},ae=U({inheritAttrs:!1,__name:"FileInput",props:{labelDefault:{type:String,default:"Upload Existing File"}},emits:["onUpload"],setup(M,{expose:N,emit:_}){const{labelDefault:V}=M,v=_;N({clear:b});const e=l(),r=l(),n=l(""),g=L(()=>e.value?e.value.name:V),x=async h=>{const t=h.target;if(!t.files||!t.files[0])return;if(t.accept.includes(t.files[0].type))n.value="";else throw e.value=void 0,n.value="File type not supported",Error(`File type ${t.files[0].type} is not supported.`);e.value=t.files[0];const I=new FileReader;I.onload=S=>{var m;const p=(m=S.target)==null?void 0:m.result;if(typeof p=="string")try{e.value.type=="text/csv"?r.value=J(p):r.value=JSON.parse(p),v("onUpload",{file:e.value,data:r.value})}catch(k){console.error("Error parsing JSON:",k)}},I.readAsText(t.files[0])};function b(){r.value=void 0,e.value=void 0,n.value=""}return(h,t)=>{const d=E;return f(),y("div",ee,[o("label",null,[o("input",P({type:"file",class:{error:s(n)},onChange:x},h.$attrs),null,16),B(" "+$(s(g)),1)]),s(n)?(f(),y("span",te,[i(d,{name:"mdi:information-slab-circle",class:"h-[14px] w-[14px]"}),B(" "+$(s(n)),1)])):q("",!0)])}}}),ne=Z(ae,[["__scopeId","data-v-177702c3"]]),oe={class:"grid gap-4 place-items-center"},se=o("label",{for:"manager-name",class:"text-lg"},"New Manager Name",-1),le={class:"grid gap-4 place-items-center"},re=o("span",null,"Select Icon",-1),ce=o("span",{class:"sr-only"},"Close Popup",-1),ie={class:"grid place-items-center w-full gap-4"},ue={key:1,class:"grid place-items-center gap-4 w-full"},de=o("p",null,"Select Icon",-1),pe={class:"flex flex-wrap gap-4 items-center justify-center"},me={class:"sr-only"},Ie=U({__name:"AddManager",props:{dialog:{type:Object,default:void 0}},setup(M,{expose:N}){const{dialog:_}=M,V=()=>{e.value="",d(),_==null||_.close()},v=z(),e=l(""),r=["star","folder","file-cabinet","pencil","car","gamepad"],n=l(""),g=l(!1),x=a=>{g.value=a},b=a=>{n.value=a,x(!1)};G(()=>{const a=Math.floor(Math.random()*r.length);n.value=r[a]});const h=()=>{I(e.value)&&(v.addManager({name:e.value,icon:n.value,data:m.value}),v.setActiveManager(e.value),V())},t=l(""),d=()=>{t.value=""},I=a=>{let c=!1;return!a||a===""?(t.value="This field is required",c):v.managers.find(C=>C.name==e.value)?(t.value="Name already exists",c):c=!0},{themeColor:S}=O(),p=l(),m=l(),k=a=>{m.value=a.data};function A(){p.value.clear(),e.value="",m.value=void 0,d()}return N({clearForm:A,isSelectingIcon:g,updateIsSelectingIcon:x}),(a,c)=>{const T=j,C=E,F=R,D=ne;return f(),H(Y,{name:"fade",mode:"out-in"},{default:w(()=>[s(g)?(f(),y("section",ue,[de,o("div",pe,[(f(),y(W,null,X(r,u=>i(F,{key:u,onClick:fe=>b(u)},{default:w(()=>[o("span",me,"Select "+$(u)+" icon",1),i(C,{name:`mdi:${u}`,size:"32",color:s(S)},null,8,["name","color"])]),_:2},1032,["onClick"])),64))])])):(f(),y("form",{key:0,class:"grid place-items-center gap-10 overflow-auto pb-8 px-2",onSubmit:K(h,["prevent"])},[o("div",oe,[se,i(T,{id:"manager-name",modelValue:s(e),"onUpdate:modelValue":c[0]||(c[0]=u=>Q(e)?e.value=u:null),placeholder:"Name",error:s(t),autofocus:"",onClearError:d,class:"w-full !text-xl"},null,8,["modelValue","error"])]),o("div",le,[re,i(F,{onClick:c[1]||(c[1]=u=>x(!0))},{default:w(()=>[ce,i(C,{name:`mdi:${s(n)}`,size:"32",color:s(S)},null,8,["name","color"])]),_:1})]),o("div",ie,[i(D,{ref_key:"fileInput",ref:p,accept:"application/json, text/csv",onOnUpload:k},null,512),i(F,{class:"w-full",type:"submit"},{default:w(()=>[B("Create New Manager")]),_:1})])],32))]),_:1})}}});export{Ie as default};
